<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<script type="text/javascript" src="./scripts/jquery.min.js"></script>
<link rel="stylesheet" href="./css/pintuer.css">
<link rel="stylesheet" href="./css/admin.css">
<script src="./js/jquery.js"></script>
<script src="./js/pintuer.js"></script>

<script type="text/javascript">
	function getUrlParams(pid){
	     var reg = new RegExp("(^|&)"+ pid +"=([^&]*)(&|$)");
	     var r = window.location.search.substr(1).match(reg);
	     if(r!=null)return  unescape(r[2]);
	      return null;
		}
		//alert(getUrlParams("pid"));
		var id = getUrlParams("pid");
	$(function() {
		$("#submitupdate").click(function() {
							//获取新增成员信息
							//alert(2);
							var name = document.getElementById("name").value;
							var sex = document.getElementById("sex").value;
							var age = document.getElementById("age").value;
							var identity = document.getElementById("identity").value;
							var birthday = document.getElementById("birthday").value;
							var telephone = document.getElementById("telephone").value;
							var state = document.getElementById("state").value;
							//alert(pid+name + sex + age + identity + birthday + telephone + state);

							$.ajax({url:"http://localhost:8080/myffms/person/updateperson.do",
									type:"post",
									contentType:"application/x-www-form-urlencoded; charset=UTF-8",
									data:{"pid":id,
										"name":name,
										"sex":sex,
										"age":age,
										"identity":identity,
										"birthday":birthday,
										"telephone":telephone,
										"state":state
										},
										dataType:"json",
										success:function(result) {
												if (result.status == 0) {//成功
												//关闭对话框
												alert("修改成功");
												window.location.href="person.html"; 
												//document.location.reload(); 
											} else if (result.status == 1) {//错误
												alert("修改失败");
											}
										}
									});

						});
	});
</script>

</head>
<body>
<div class="panel admin-panel">
  <div class="panel-head" id="add"><strong><span class="icon-pencil-square-o"></span>修改成员</strong></div>
  <div class="body-content">
    <form method="post" class="form-x" action="">  
      
      <div class="form-group">
        <div class="label">
          <label>姓名：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="name" class="name"  data-validate="required:请输入姓名" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
      <div class="form-group">
        <div class="label">
          <label>性别：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="sex" class="sex"  data-validate="required:请输入性别" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>     
      <div class="form-group">
        <div class="label">
          <label>年龄：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="age" class="age"  data-validate="required:请输入年龄" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
      <div class="form-group">
        <div class="label">
          <label>身份：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="identity" class="identity"  data-validate="required:请输入身份" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
	  <div class="form-group">
        <div class="label">
          <label>出生日期：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="date" id="birthday" class="birthday" display:inline-block" data-validate="required:请输入出生日期"  />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
	  <div class="form-group">
        <div class="label">
          <label>联系方式：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="telephone" class="telephone"  data-validate="required:请输入联系方式" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
	  <div class="form-group">
        <div class="label">
          <label>当前状态：</label>
        </div>
        <div class="field">
          <div class="field">
          <input type="text" id="state" class="state"  data-validate="required:请输入当前状态" />
          <div class="tips"></div>
		  </div>
        </div>
      </div>
      <div class="form-group">
        <div class="label">
          <label></label>
        </div>
        <div class="field">
          <button id="submitupdate" class="button bg-main icon-check-square-o" type="submit"> 提交</button>
        </div>
      </div>
    </form>
  </div>
</div>

</body></html>